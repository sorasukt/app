<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Redirecting… | STNET Radio</title>

  <link rel="icon" href="https://stnetradio.com/img/fav.ico" type="image/x-icon" />
  <meta name="theme-color" content="#D10000" />

  <meta name="description" content="Hold tight—sending you to the right place. You’ll be redirected in a moment." />
  <meta property="og:title" content="Redirecting… | STNET Radio" />
  <meta property="og:description" content="Hold tight—sending you to the right place. You’ll be redirected in a moment." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://sorasukt.dev.stnetradio.com/" />

  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Thai:wght@100;200;300;400;500;600;700&family=Source+Sans+3:wght@300;400;600;700;800;900&display=swap" rel="stylesheet">

  <style>
    :root {
      --brand: #D10000;
      --brand-ink: #ffffff;
      --bg: #0b0b0b;
      --card: #ffffff;
      --ink: #1a1a1a;
      --muted: #666666;
      --rail: #e6e6e6;
      --radius: 14px;
      --shadow: 0 10px 30px rgba(0,0,0,.12);
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --bg: #0a0a0a;
        --card: #111214;
        --ink: #F3F4F6;
        --muted: #9CA3AF;
        --rail: #1f2022;
        --shadow: 0 12px 40px rgba(0,0,0,.35);
      }
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }

    @font-face {
      font-family: 'Chillax-Variable';
      src: url('/fonts/Chillax-Variable.woff2') format('woff2'),
           url('/fonts/Chillax-Variable.woff') format('woff'),
           url('/fonts/Chillax-Variable.ttf') format('truetype');
      font-display: swap;
    }

    body {
      margin: 0;
      font-family: 'Chillax-Variable', 'IBM Plex Sans Thai', system-ui, -apple-system, Segoe UI, Roboto, 'Source Sans 3', Arial, sans-serif;
      background: radial-gradient(1200px 600px at 75% -10%, rgba(209,0,0,.25), transparent 50%),
                  radial-gradient(1000px 500px at -10% 110%, rgba(209,0,0,.22), transparent 60%),
                  var(--bg);
      color: var(--ink);
      display: grid;
      place-items: center;
      padding: 24px;
    }

    .card {
      width: min(92vw, 680px);
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: clamp(24px, 6vw, 40px);
      text-align: center;
      border: 1px solid rgba(0,0,0,.06);
    }

    header {
      display: flex; align-items: center; justify-content: center; gap: 14px;
      margin-bottom: 8px;
    }

    .badge {
      display: inline-flex; align-items: center; gap: 8px;
      padding: 6px 10px; border-radius: 999px;
      background: rgba(209,0,0,.10); color: var(--ink);
      font-weight: 600; font-size: 12px; letter-spacing: .02em;
      text-transform: uppercase;
    }

    h1 { font-size: clamp(24px, 3.3vw, 36px); margin: 8px 0 6px; line-height: 1.15; }
    p.lede { color: var(--muted); margin: 0 0 14px; }
    .url { color: var(--brand); word-break: break-all; font-weight: 600; }

    .progress {
      margin: 18px 0 8px; height: 10px; background: var(--rail);
      border-radius: 999px; overflow: hidden; position: relative;
    }
    .bar { height: 100%; width: 0%; background: var(--brand); }

    .timer { color: var(--muted); font-size: 14px; }

    .actions { display: flex; gap: 12px; justify-content: center; margin-top: 18px; flex-wrap: wrap; }

    .btn {
      appearance: none; border: 0; cursor: pointer; text-decoration: none;
      padding: 12px 18px; border-radius: 10px; font-weight: 700; font-size: 14px;
      background: var(--brand); color: var(--brand-ink);
      box-shadow: 0 6px 16px rgba(209,0,0,.25);
      transition: transform .06s ease, box-shadow .2s ease, filter .2s ease;
    }
    .btn:hover { transform: translateY(-1px); filter: brightness(1.02); box-shadow: 0 10px 22px rgba(209,0,0,.30); }
    .btn:active { transform: translateY(0); box-shadow: 0 6px 16px rgba(209,0,0,.25); }

    .btn-ghost {
      background: transparent; color: var(--ink); border: 1px solid rgba(0,0,0,.12);
    }

    .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 1px, 1px); white-space: nowrap; border: 0; }

    @media (prefers-reduced-motion: reduce) {
      .bar { transition: none !important; }
    }
  </style>

  <noscript>
    <meta http-equiv="refresh" content="5;url=https://ask.stnetradio.com/soaqer/whyteacher" />
  </noscript>
</head>
<body>
  <main class="card" role="region" aria-labelledby="title">
    <header>
      <span class="badge" aria-hidden="true">STNET Radio</span>
    </header>

    <h1 id="title">Redirecting</h1>
    <p class="lede">You’ll be redirected in a moment.</p>
    <span id="redirectUrl" class="sr-only">https://sorasukt.dev.stnetradio.com/</span>

    <div class="progress" aria-hidden="true">
      <div class="bar" id="progressBar"></div>
    </div>

    <p class="timer" id="timer" aria-live="polite">Redirecting in 5 seconds…</p>

    <div class="actions">
      <a class="btn" id="redirectNow" href="https://sorasukt.dev.stnetradio.com/" rel="noopener">Go now</a>
      <button class="btn btn-ghost" id="copyUrl" type="button" aria-label="Copy destination URL">Copy link</button>
      <a class="btn btn-ghost" id="stayHere" href="#" role="button">Stay here</a>
    </div>
  </main>

  <script>
    const DEFAULT_TARGET = 'https://sorasukt.dev.stnetradio.com/';
    const DEFAULT_DELAY = 5;

    const qp = new URLSearchParams(location.search);
    const rawTo = qp.get('to');
    const parsedDelay = parseInt(qp.get('delay'), 10);

    const isSafeUrl = (u) => {
      try { const url = new URL(u); return ['http:', 'https:'].includes(url.protocol); } catch { return false; }
    };

    const targetUrl = isSafeUrl(rawTo) ? rawTo : DEFAULT_TARGET;
    const redirectDelay = Number.isFinite(parsedDelay) && parsedDelay >= 0 && parsedDelay <= 120 ? parsedDelay : DEFAULT_DELAY;

    const urlEl = document.getElementById('redirectUrl');
    const timerEl = document.getElementById('timer');
    const progressBar = document.getElementById('progressBar');
    const redirectBtn = document.getElementById('redirectNow');
    const copyBtn = document.getElementById('copyUrl');
    const stayBtn = document.getElementById('stayHere');

    urlEl.textContent = targetUrl;
    redirectBtn.href = targetUrl;

    progressBar.style.transition = `width ${redirectDelay}s linear`;
    requestAnimationFrame(() => {
      requestAnimationFrame(() => { progressBar.style.width = '100%'; });
    });

    let secondsLeft = redirectDelay;
    const updateTimer = () => {
      const s = secondsLeft === 1 ? 'second' : 'seconds';
      timerEl.textContent = redirectDelay === 0
        ? 'Redirecting now…'
        : `Redirecting in ${secondsLeft} ${s}…`;
    };
    updateTimer();

    const tick = () => {
      if (redirectDelay === 0) { goNow(); return; }
      secondsLeft--;
      if (secondsLeft <= 0) { goNow(); }
      else { updateTimer(); }
    };

    let interval = setInterval(tick, 1000);

    function goNow() {
      clearInterval(interval);
      location.replace(targetUrl);
    }

    redirectBtn.addEventListener('click', () => {
      clearInterval(interval);
    });

    copyBtn.addEventListener('click', async () => {
      try {
        await navigator.clipboard.writeText(targetUrl);
        copyBtn.textContent = 'Copied!';
      } catch {
        // Fallback for non-HTTPS or older browsers
        const input = document.createElement('input');
        input.value = targetUrl;
        document.body.appendChild(input);
        input.select();
        try {
          document.execCommand('copy');
          copyBtn.textContent = 'Copied!';
        } catch {
          copyBtn.textContent = 'Copy failed';
        }
        document.body.removeChild(input);
      }
      setTimeout(() => (copyBtn.textContent = 'Copy link'), 1200);
    });

    stayBtn.addEventListener('click', (e) => {
      e.preventDefault();
      clearInterval(interval);
      progressBar.style.transition = 'none';
      progressBar.style.width = '0%';
      timerEl.textContent = 'Auto-redirect cancelled. You can go anytime.';
    });
  </script>
</body>
</html>